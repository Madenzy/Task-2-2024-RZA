{% extends "base.html" %}
{% block head %}Task 1{% endblock %}

{% block body %}
<link rel="stylesheet" href="/static/Css/dashboard.css">
<style>
  .card ul{
    list-style: none;

  }
</style>
<style>
.column-title {
    font-size: 1.5em;
    font-weight: bold;
    margin-bottom: 10px;
}

.card {
    background-color: #f5f5f5;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.booking-btn {
    display: inline-block;
    margin-left: 10px;
    padding: 5px 10px;
    background-color: #3498db;
    color: white;
    text-decoration: none;
    border-radius: 5px;
}

.booking-btn:hover {
    background-color: #2980b9;
}
</style>
<section>
  <div class="dashboard-container">
    <div class="top-bar">
      <div class="greeting"><h1>Hi, {{ user.name }}!</h1></div>
      <div class="action-buttons">
        <div class="settings">
          <p><img href="/static/image/settings.png"><a href="{{ url_for('auth.account_settings') }}">Account Settings</a></p>
        </div>
        <button class="action-btn"><a href="{{url_for('hotel_booking')}}">Book Hotel</a></button>
        <button class="action-btn"><a href="{{url_for('zoo_booking')}}">Book zoo Tickets</a></button>
      </div>
    </div>

    <div class="rewards-card">
      <div class="card" style="min-width:360px;">
      <div style="font-weight:600;font-size:1.05rem;margin-bottom:6px;">
        Rewards level: <span style="color:#2566fc">{{ user.rewards_level }}</span>
      </div>
      <div style="margin-bottom: 4px;">
        Loyalty Points: <span style="font-weight:500;">{{ user.rewards_points }}</span>
      </div>
      <div style="font-size:0.97rem; margin-bottom:3px;">
        Next Level: <strong>{{ user.next_level_name }}</strong> â€” {{ user.points_to_next_level }} pts to go
      </div>
      <div class="rewards-progress" title="{{ user.next_level_progress_percent }}%">
        <div class="progress-bar" style="width:{{ user.next_level_progress_percent }}%;"></div>
      </div>
      </div>
    </div>

    <div class="cards-row">
      <div class="cards-column">
        <div class="column-title">Booking History:</div>
        <div class="card">
          Zoo ticket on 21/11/2025 for 13/12/2025 (5 people)<br>
          <span style="font-size:0.98rem;color:#666;">TicketID : 31378</span>
          <br>
          <button class="booking-btn">View</button>
        </div>
        <div class="card">
          Hotel Booking On 21/10/2025 for 13/11/2025<br>
          <span style="font-size:0.98rem;color:#666;">Booking Reference: 46476qw</span>
          <br>
          <button class="booking-btn">View</button>
        </div>
      </div>
      <div class="cards-column">
        <div class="column-title">Upcoming Bookings</div>
        <div class="card">
            {% if hotel_bookings %}
                    {% for b in hotel_bookings %}
                        <ul>
                            <td>
                            <li>Hotel booking for {{ b.check_in_date }} <button class="booking-btn"> <a href="{{ url_for('hotel.manage_hotel') }}">manage</a></button></li>
                        </ul>
                    {% endfor %}
            {% else %}
                <p>You have no hotel bookings yet.</p>
            {% endif %}
          
        </div>
        <div class="cards-column">
        <div class="column-title">Upcoming Zoo Bookings</div>
          <div class="card">
              {% if zoo_bookings %}
                  <ul>
                      {% for b in zoo_bookings %}
                      <td>
                          <li>
                              ZOO booking for {{ b.visit_date.strftime('%A, %B %d, %Y') }} -<a href="{{ url_for('zoo.manage_zoo') }}" class="booking-btn">Manage</a></li>
                      {% endfor %}
                  </ul>
              {% else %}
                  <p>You have no upcoming zoo bookings yet.</p>
              {% endif %}
          </div>
          
        </div>
      </div>
    </div>
  </div>
  

<section>
{% endblock %}
